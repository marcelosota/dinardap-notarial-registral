<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:b="http://bootsfaces.net/ui" xmlns:p="http://primefaces.org/ui">

<!-- 
		Replace path to template, title, header and body
		with actual data.
	 -->
<ui:composition template="/template/general.xhtml">
	<ui:define name="content">
		<h1 class="h-wai">#{etiquetas['nombre.sistema']} - Tr√°mites
			Pendientes Registrador</h1>
		<h:form id="formInicio">
			<!-- <h:panelGrid columns="2"
				
				columnClasses="form-label-derecha ui-grid-col-1, form-input-izquierda">
			 
				<h:outputLabel value="#{etiquetas['codigo.tramite']}" />
				<b:inputText id="idCodigo"
					value="" 
					required="true"
					required-message="#{etiquetas['codigo.tramite']}-#{mensajes['requerido']}" />
			</h:panelGrid>
			<p:separator />
			<p:commandButton value="#{etiquetas['consultar']}"
				update="@form, dtbPendientes"
				actionListener="#{beneficiosPorUsuarioCtrl.consultaBeneficiosPorCedula()}"
				icon="ui-icon-search" process="@this, idCodigo" />
			<p:separator />
 -->
			<h:panelGrid columns="2">
				<p:dataTable id="dtbPendientes" var="dtb"
					value="#{tramitesPendientesRegistrosCtrl.listaTramitePendiente}"
					rows="7" paginator="true" paginatorPosition="bottom"
					scrollable="true" scrollWidth="99%"
					selectionMode="single"
					rowKey="#{dtb.codigo}"
				    selection="#{tramitesPendientesRegistrosCtrl.selectedTramite}"				    
				    lazy="true"
					style="font-size: 9pt; margin-bottom:20px;"
					paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
					emptyMessage="No existen registros"
					filteredValue="#{tramitesPendientesRegistrosCtrl.filtro}">
					 <p:ajax event="rowSelect" listener="#{tramitesPendientesRegistrosCtrl.filaSeleccionada}" update=":formRegistrador"  />
					<p:column headerText="#{etiquetas['codigo.tramite']}" width="105"
						filterBy="#{dtb.codigo}"
						sortBy="#{dtb.codigo}" filterMatchMode="contains">
						<h:outputText value="#{dtb.codigo}" />
					</p:column>					
					<p:column headerText="#{etiquetas['nombre.institucion']}" width="160">
						<h:outputText value="#{dtb.institucion}"
							styleClass="texto-justificado" />
					</p:column>
					<p:column headerText="#{etiquetas['registrado.por']}" width="100">
						<h:outputText value="#{dtb.registradoPor}"
							styleClass="texto-justificado" />
					</p:column>
					<p:column headerText="#{etiquetas['fecha.registro']}" width="100">
						<h:outputText value="#{dtb.fechaRegistro}"
							styleClass="texto-justificado">
							<f:convertDateTime pattern="yyyy-MM-dd" />
						</h:outputText> 
					</p:column>
				</p:dataTable>

			</h:panelGrid>
		</h:form>
		
		<h:form id="formRegistrador">		
			<b:panel style="width: 100%"
				title="#{etiquetas['tramite.seleccionado']}">
				<b:panelGrid columns="2"			
				columnClasses="form-label-derecha ui-grid-col-1, form-input-izquierda">
				<p:outputLabel id="codigoTramite" for="codigo" value="#{etiquetas['codigo.tramite']}" />
					<p:inputText id="codigo"
						value="#{tramitesPendientesRegistrosCtrl.tramiteDto.tramite.codigo}"
						readonly="true">						
					</p:inputText>
				<p:outputLabel for="identificacion" value="#{etiquetas['identificacion']}" />
					<p:inputText render=""
					    id="identificacion"
						value="#{tramitesPendientesRegistrosCtrl.tramiteDto.tramite.identificacionRequirente}" size="64"
						readonly="true">
					</p:inputText>
				<p:outputLabel for="requirente" value="#{etiquetas['nombre.requirente']}" />
					<p:inputText 
					    id="requirente"
						value="#{tramitesPendientesRegistrosCtrl.tramiteDto.tramite.nombreRequirente}" size="64"
						readonly="true">
					</p:inputText>	
				<p:outputLabel for="correo" value="#{etiquetas['correo.electronico']}" />
					<p:inputText 
					    id="correo"
						value="#{tramitesPendientesRegistrosCtrl.tramiteDto.tramite.correoRequirente}" size="64"
						readonly="true">
					</p:inputText>
					<p:outputLabel for="btnDescargaActoNotarial" value="#{etiquetas['acto.notarial']}" />
					<h:commandLink id="btnDescargaActoNotarial" target="_blank"
						value="Descargar"					
						immediate="true" action="#{tramitesPendientesRegistrosCtrl.descargarActoNotarial}">
						<i class="fa fa-file-pdf-o fa-lg notarizado"></i>					
					</h:commandLink>
					<h:outputLabel value="#{etiquetas['documento.registral']}*" />
				<h:panelGroup>					
					<p:fileUpload id="fupDocHabilitante"
						rendered=""
						fileUploadListener="#{tramitesPendientesRegistrosCtrl.subirArchivo}"
						sizeLimit="6000000" process="@this" allowTypes="/(\.|\/)(pdf)$/"
						mode="advanced" auto="true"
						disabled="#{tramitesPendientesRegistrosCtrl.subirArchivo}"
						update="" />
				</h:panelGroup>				
						
					<p:tooltip for="codigoTramite" value="#{mensajes['cvtu']}" />
				</b:panelGrid>
				<h:panelGrid columns="2" id="aclarado" style="width:100%;"
					columnClasses="form-label-derecha ui-grid-col-1, form-input-izquierda">					
						<h:outputText value="#{etiquetas['estado.tramite']}*"/>						
					
						<p:selectOneMenu id="somEstadoTramite"
							disabled=""
							value="" required="true"
							requiredMessage="Estado : #{mensajes['requerido']}">
							<p:ajax event="change"
								listener="#{verRegistroCtrl.cambiarSuspender}"
								update="@form observacion" />
							<f:selectItem itemLabel="Seleccionar .." itemValue="#{null}" />
							<f:selectItem itemLabel="SUSPENDIDO" itemValue="SUSPENDIDO" />
							<f:selectItem itemLabel="NO SUSPENDIDO" itemValue="NO SUSPENDIDO" />
						</p:selectOneMenu>
					
				</h:panelGrid>
				
				<h:panelGrid rendered="" columns="2"
					style="width:100%;" columnClasses="form-label-derecha ui-grid-col-1, form-input-izquierda">
					<h:panelGroup columnClasses="form-label-derecha ui-grid-col-1">
						<h:outputText value="#{etiquetas['observacion']}">
						</h:outputText>
					</h:panelGroup>
					<h:panelGroup columnClasses="form-input-izquierda">
						<p:inputTextarea disabled=""
							rendered="" rows="4" cols="60"
							autoResize="false" value="#{tramitesPendientesRegistrosCtrl.tramiteDto.observacionRegistro}"
							size="500" maxlength="500" id="observacion"/>
					</h:panelGroup>
				</h:panelGrid>
				<b:panelGrid colSpans="12"
					style="width: 100%; margin: 4px 5px; text-align: center;">
					<p:commandButton value="#{etiquetas['guardar.tramite']}"
						id="guardarBtn" style="margin-right:20px;"
						icon="fa fa-fw fa-th"
						update=""
						action="#{tramitesPendientesRegistrosCtrl.guardarTramite}" />
				</b:panelGrid>
			</b:panel>
			
		</h:form>		
	</ui:define>
</ui:composition>
</html>