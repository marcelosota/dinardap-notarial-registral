<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:b="http://bootsfaces.net/ui" xmlns:p="http://primefaces.org/ui">

<!-- 
		Replace path to template, title, header and body
		with actual data.
	 -->
<ui:composition template="/template/general.xhtml">
	<ui:define name="content">
		<h1 class="h-wai">#{etiquetas['nombre.sistema']} - Instituci√≥n</h1>
		<h:form id="formInicio">
			<p:panel style="width:100%;">
				<h:panelGrid columns="2" style="width:90%;"
					columnClasses="form-label-derecha, form-input-izquierda">
					<p:outputLabel value="#{etiquetas['ruc']}*:" />
					<p:inputText id="txtRuc"
						value="#{editarInstitucionCtrl.institucionDto.ruc}" maxlength="13"
						disabled="true" required="true"
						requiredMessage="#{etiquetas['ruc']} #{mensajes['requerido']}">
					</p:inputText>
					<p:outputLabel value="#{etiquetas['nombre.institucion']}*:" />
					<p:inputText id="txtInstitucion"
						value="#{editarInstitucionCtrl.institucionDto.nombre}"
						disabled="true" size="100" required="true"
						requiredMessage="#{etiquetas['nombre.institucion']} #{mensajes['requerido']}" />
					<p:outputLabel value="#{etiquetas['siglas']}*:" />
					<p:inputText id="txtSiglas"
						value="#{editarInstitucionCtrl.institucionDto.siglas}"
						maxlength="16" size="32" required="true"
						requiredMessage="#{etiquetas['siglas']} #{mensajes['requerido']}" />
					<p:outputLabel value="#{etiquetas['tipo.institucion']}*:" />
					<b:selectOneMenu id="cmbTipoInstitucion"
						value="#{editarInstitucionCtrl.institucionDto.tipoInstitucionId}"
						required="true"
						requiredMessage="#{etiquetas['tipo.institucion']} #{mensajes['requerido']}">
						<f:selectItem itemLabel="#{etiquetas['seleccionar']}"
							noSelectionOption="true" itemValue="-1" />
						<f:selectItems
							value="#{editarInstitucionCtrl.listaTipoInstitucion}" var="tipo"
							itemLabel="#{tipo.descripcion}"
							itemValue="#{tipo.tipoInstitucionId}" />
					</b:selectOneMenu>
					<p:outputLabel value="#{etiquetas['codigo.sau']}:" />
					<p:inputText id="txtCodigoSau"
						value="#{editarInstitucionCtrl.institucionDto.codigoIs}"
						maxlength="8" size="16">
						<f:validateRegex pattern="[0-9]+" />
					</p:inputText>
					<p:outputLabel value="#{etiquetas['provincia']}*:" />
					<b:selectOneMenu id="cmbProvincia"
						value="#{editarInstitucionCtrl.institucionDto.provinciaId}"
						ajax="true"
						onchange="ajax:editarInstitucionCtrl.cantonPorProvincia"
						update="cmbCanton" process="@this" 
						required="true"
						requiredMessage="#{etiquetas['provincia']} #{mensajes['requerido']}"
						style="font-size:x-small; width: 100%;">
						<f:selectItem itemLabel="#{etiquetas['seleccionar']}"
							noSelectionOption="true" itemValue="-1" />
						<f:selectItems value="#{editarInstitucionCtrl.provincia}"
							var="pro" itemLabel="#{pro.nombre}"
							itemValue="#{pro.provinciaId}" />
					</b:selectOneMenu>
					<p:outputLabel value="#{etiquetas['canton']}*:" />
					<b:selectOneMenu id="cmbCanton"
						value="#{editarInstitucionCtrl.institucionDto.cantonId}"
						disabled="#{editarInstitucionCtrl.flagCanton}"
						required="true"
						requiredMessage="#{etiquetas['canton']} #{mensajes['requerido']}"
						style="font-size:x-small; width:100%">
						<f:selectItem itemLabel="#{etiquetas['seleccionar']}"
							noSelectionOption="true" />
						<f:selectItems value="#{editarInstitucionCtrl.canton}" var="can"
							itemLabel="#{can.nombre}" itemValue="#{can.cantonId}" />
					</b:selectOneMenu>
					<p:outputLabel value="#{etiquetas['estado']}:" />
					<b:selectOneMenu id="cmbEstado"
						value="#{editarInstitucionCtrl.institucionDto.estado}" required="true"
						required-message="#{etiquetas['estado']} #{mensajes['requerido']}"
						styleClass="form-combo-centrado" process="@this">
						<f:selectItem itemLabel="#{etiquetas['seleccionar']}"
							itemValue="-1" noSelectionOption="true" />
						<f:selectItems value="#{editarInstitucionCtrl.estado}" />
					</b:selectOneMenu>
					<p:outputLabel value="#{etiquetas['institucion.adscrita']}*:" />
					<b:switch id="sbbAdscrita"
						value="#{editarInstitucionCtrl.flagAdscrita}" onText="Si"
						offText="No" onColor="success" offColor="info" process="@this"
						update="pnlSalida" ajax="true" />
				</h:panelGrid>
			</p:panel>
			<p:outputPanel id="pnlSalida">
				<p:panel id="pnlRectora" style="width:100%;"
					rendered="#{editarInstitucionCtrl.flagAdscrita}">
					<h:panelGrid columns="2" style="width:90%;"
						columnClasses="form-label-derecha ui-grid-col-2, form-input-izquierda">
						<p:outputLabel value="#{etiquetas['tipo.rectora']}*:" />
						<b:selectOneMenu id="cmbTipoInstitucionRectora"
							value="#{editarInstitucionCtrl.tipoInstitucionRectora}"
							ajax="true" update="cmbInstitucionRectora"
							onchange="ajax:editarInstitucionCtrl.buscarInstitucionPorTipo"
							required="true"
							requiredMessage="#{etiquetas['tipo.rectora']} #{mensajes['requerido']}">
							<f:selectItem itemLabel="#{etiquetas['seleccionar']}"
								noSelectionOption="true" itemValue="-1" />
							<f:selectItems
								value="#{editarInstitucionCtrl.listaTipoInstitucion}" var="tipo"
								itemLabel="#{tipo.descripcion}"
								itemValue="#{tipo.tipoInstitucionId}" />
						</b:selectOneMenu>
						<p:outputLabel
							value="#{etiquetas['nombre.institucion.rectora']}*:" />
						<b:selectOneMenu id="cmbInstitucionRectora"
							value="#{editarInstitucionCtrl.institucionDto.adscrita}"
							disabled="#{editarInstitucionCtrl.flagRectora}"
							required="true"
							required-message="#{etiquetas['nombre.institucion.rectora']} #{mensajes['requerido']}"
							styleClass="form-combo-centrado">
							<f:selectItem itemLabel="#{etiquetas['seleccionar']}"
								itemValue="-1" noSelectionOption="true" />
							<f:selectItems
								value="#{editarInstitucionCtrl.listaInstitucionesRectoras}" var="inst"
								itemLabel="#{inst.nombre} - #{inst.siglas}" itemValue="#{inst.institucionId}" />
						</b:selectOneMenu>
					</h:panelGrid>
				</p:panel>
			</p:outputPanel>
			<p:commandButton id="btnGuardar" value="#{etiquetas['guardar']}"
				actionListener="#{editarInstitucionCtrl.guardarInstitucion}"
				update="txtRuc txtInstitucion txtSiglas cmbTipoInstitucion txtCodigoSau cmbProvincia cmbCanton sbbAdscrita
                    	pnlSalida pnlRectora cmbTipoInstitucionRectora cmbInstitucionRectora btnGuardar msgMensajes" />
			<p:spacer width="10px" />
			<p:commandButton value="#{etiquetas['cancelar']}"
				actionListener="#{editarInstitucionCtrl.regresar}"
				update="txtRuc txtInstitucion txtSiglas cmbTipoInstitucion txtCodigoSau cmbProvincia cmbCanton sbbAdscrita
                    	pnlSalida pnlRectora cmbTipoInstitucionRectora cmbInstitucionRectora btnGuardar msgMensajes"
				process="@this" />
		</h:form>
	</ui:define>
</ui:composition>

</html>