<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui">
    <ui:composition template="/template/general.xhtml">
        <ui:define name="content">
            <p:dialog id="generacionTramiteDlg"
                      header="Generacion de Trámite" 
                      modal="true"
                      widgetVar="generacionTramiteDlg" 
                      width="35%"
                      position="top"
                      height="auto"
                      blockScroll="true"
                      resizable="false">
                <h:form id="formGeneracionTramiteDlg">
                    <b:panel style="width: 100%;" title="Trámite Generado">
                        <p:panelGrid id="tramiteGenerado" style="width: 100%">
                            <f:facet name="header">
                                <p:row>
                                    <p:column colspan="2"><h:outputText value="Trámite Generado" /></p:column>
                                </p:row>
                            </f:facet>

                            <p:row>
                                <p:column><h:outputText value="#{etiquetas['nombre.identificacion']}" /></p:column>
                                <p:column><h:outputText value="#{tramiteNotarialInconsistenciaCtrl.tramiteGenerado.identificacionRequirente}"/></p:column>
                            </p:row>

                            <p:row>
                                <p:column><h:outputText value="#{etiquetas['nombre.nombre']}" /></p:column>
                                <p:column><h:outputText value="#{tramiteNotarialInconsistenciaCtrl.tramiteGenerado.nombreRequirente}"/></p:column>
                            </p:row>

                            <p:row>
                                <p:column><h:outputText value="#{etiquetas['nombre.correoElectronico']}" /></p:column>
                                <p:column><h:outputText value="#{tramiteNotarialInconsistenciaCtrl.tramiteGenerado.correoRequirente}"/></p:column>
                            </p:row>

                            <p:row>
                                <p:column><h:outputText value="#{etiquetas['continua.tramite']}" /></p:column>
                                <p:column><h:outputText value="#{tramiteNotarialInconsistenciaCtrl.tramiteGenerado.continuaTramite.nombre}" /></p:column>
                            </p:row>
                            <p:row>
                                <p:column><h:outputText value="#{etiquetas['nombre.fechaRegistro']}" /></p:column>
                                <p:column>
                                    <h:outputText value="#{tramiteNotarialInconsistenciaCtrl.tramiteGenerado.fechaRegistro}">
                                        <f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss" />
                                    </h:outputText>
                                </p:column>
                            </p:row>
                            <!--                            <p:row>
                                                            <p:column><h:outputText value="#{etiquetas['nombre.descripcionActoNotarial']}" /></p:column>
                                                            <p:column>
                                                                <h:outputText value="#{tramiteNotarialInconsistenciaCtrl.tramiteGenerado.descripcion}"/>
                                                            </p:column>
                                                        </p:row>-->

                            <p:row>
                                <p:column colspan="2" style="text-align: center">
                                    <h:outputText style="font-weight: bold" value="#{etiquetas['nombre.codigoValidacionTramite']}" />
                                </p:column>
                            </p:row>

                            <p:row>
                                <p:column colspan="2" style="text-align: center">
                                    <h:outputText style="font-weight: 900; font-size: 150%" value="#{tramiteNotarialInconsistenciaCtrl.tramiteGenerado.codigo}"/>
                                </p:column>
                            </p:row>
                        </p:panelGrid>

                        <b:panelGrid colSpans="12" style="width: 100%; margin: 4px 5px; align-content: center;">
                            <p:commandButton value="#{etiquetas['imprimir']}" type="button" icon="pi pi-print" style="display:block;margin-bottom: 20px">
                                <p:printer target="tramiteGenerado" />
                            </p:commandButton>                            
                        </b:panelGrid>                       

                    </b:panel>                    
                </h:form>
            </p:dialog>

            <h1 class="h-wai">#{etiquetas['nombre.sistema']} - #{etiquetas['nombre.moduloInconsistencia']}</h1>

            <h:form id="formActosNotarialesInconsistentes">
                <b:panel style="width: 100%" title="#{etiquetas['nombre.actosNotarialesInconsistentes']}">
                    <h:panelGrid columns="1" style="width: 100%;">
                        <p:dataTable id="actosNotarialesInconsistentesTbl"
                                     value="#{tramiteNotarialInconsistenciaCtrl.actoNotarialList}" 
                                     var="tramite"
                                     rowKey="#{tramite.tramiteId}"
                                     selectionMode="single"
                                     selection="#{tramiteNotarialInconsistenciaCtrl.tramite}"
                                     reflow="true" rows="5" paginator="true"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,25,50"
                                     tableStyle="width:auto">

                            <p:ajax event="rowSelect" listener="#{tramiteNotarialInconsistenciaCtrl.onSelectTramite}"  update="formRegistroTramite"/>

                            <p:column headerText="#{etiquetas['nombre.descripcionActoNotarial']}" 
                                      sortBy="#{tramite.descripcion}" 
                                      filterBy="#{tramite.descripcion}" filterMatchMode="contains" 
                                      width="20%" style="text-align: left">
                                <h:outputText value="#{tramite.descripcion}" />
                            </p:column>
                            <p:column headerText="#{etiquetas['nombre.codigoCVTU']}" 
                                      sortBy="#{tramite.codigo}" 
                                      filterBy="#{tramite.codigo}" filterMatchMode="contains" 
                                      width="20%" style="text-align: center">
                                <h:outputText value="#{tramite.codigo}" />
                            </p:column>
                            <p:column headerText="#{etiquetas['nombre.identificacion']}" 
                                      sortBy="#{tramite.identificacionRequirente}" 
                                      filterBy="#{tramite.identificacionRequirente}" filterMatchMode="contains" 
                                      width="20%" style="text-align: center">
                                <h:outputText value="#{tramite.identificacionRequirente}"/>
                            </p:column>
                            <p:column headerText="#{etiquetas['nombre.nombre']}" 
                                      sortBy="#{tramite.nombreRequirente}" 
                                      filterBy="#{tramite.nombreRequirente}" filterMatchMode="contains" 
                                      width="20%" style="text-align: center">
                                <h:outputText value="#{tramite.nombreRequirente}"/>
                            </p:column>
<!--                            <p:column headerText="#{etiquetas['nombre.fechaRegistro']}" 
                                      sortBy="#{tramite.fechaRegistro}" 
                                      filterBy="#{tramite.fechaRegistro}" filterMatchMode="contains" 
                                      width="10%" style="text-align: center">
                                <h:outputText value="#{tramite.fechaRegistro}">
                                    <f:convertDateTime pattern="yyyy/MM/dd hh:mm a"  />
                                </h:outputText>
                            </p:column>-->
<!--                            <p:column headerText="#{etiquetas['nombre.fechaReasignacion']}" 
                                      sortBy="#{tramite.fechaCierre}" 
                                      filterBy="#{tramite.fechaCierre}" filterMatchMode="contains" 
                                      width="10%" style="text-align: center">
                                <h:outputText value="#{tramite.fechaCierre}">
                                    <f:convertDateTime pattern="yyyy/MM/dd hh:mm a"  />
                                </h:outputText>
                            </p:column>-->
                            <p:column headerText="#{etiquetas['nombre.institucionReasigna']}" 
                                      sortBy="#{tramite.continuaTramite.nombre}" 
                                      filterBy="#{tramite.continuaTramite.nombre}" filterMatchMode="contains" 
                                      width="20%" style="text-align: center">
                                <h:outputText value="#{tramite.continuaTramite.nombre} - #{tramite.continuaTramite.siglas}"/>
                            </p:column>

                        </p:dataTable>
                    </h:panelGrid>
                </b:panel>
            </h:form>

            <h:form id="formRegistroTramite" >
                <b:panel style="width: 75%" title="#{etiquetas['nombre.registroInfoTramite']}" rendered="#{tramiteNotarialInconsistenciaCtrl.onSelectTramiteInconsistente}">
                    <b:panelGrid colSpans="3,9" style="width: 100%; margin: 4px 5px;">                        
                        <h:panelGroup id="auxLblCedula">
                            <p:outputLabel for="cedula" value="#{etiquetas['nombre.identificacion']}" rendered="#{tramiteNotarialInconsistenciaCtrl.onCedula}"/>
                        </h:panelGroup>
                        <h:panelGroup id="auxCedula">
                            <p:inputText id="cedula" rendered="#{tramiteNotarialInconsistenciaCtrl.onCedula}"
                                         disabled="true"
                                         maxlength="10"
                                         value="#{tramiteNotarialInconsistenciaCtrl.tramite.identificacionRequirente}"
                                         style="width: 90%"
                                         readonly="true"
                                         required="true"/>                               
                        </h:panelGroup>

                        <h:panelGroup id="auxLblPasaporte">
                            <p:outputLabel for="pasaporte" value="#{etiquetas['nombre.identificacion']}" rendered="#{tramiteNotarialInconsistenciaCtrl.onPasaporte}" />
                        </h:panelGroup>
                        <h:panelGroup id="auxPasaporte">
                            <p:inputText id="pasaporte" rendered="#{tramiteNotarialInconsistenciaCtrl.onPasaporte}"
                                         disabled="true"
                                         maxlength="20"
                                         value="#{tramiteNotarialInconsistenciaCtrl.tramite.identificacionRequirente}"
                                         style="width: 90%"
                                         readonly="true"
                                         required="true">                            
                            </p:inputText>
                        </h:panelGroup>

                        <p:outputLabel for="nombre" value="#{etiquetas['nombre.nombre']}"/>
                        <p:inputText id="nombre" 
                                     disabled="true"
                                     maxlength="150"
                                     value="#{tramiteNotarialInconsistenciaCtrl.tramite.nombreRequirente}"
                                     style="width: 90%"
                                     readonly="true"
                                     required="true">
                        </p:inputText>

                        <h:panelGroup id="auxLblNacionalidad">
                            <p:outputLabel for="nacionalidad" value="#{etiquetas['nombre.nacionalidad']}" rendered="#{tramiteNotarialInconsistenciaCtrl.onPasaporte}"/>
                        </h:panelGroup>
                        <h:panelGroup id="auxNacionalidad">
                            <p:inputText id="nacionalidad" 
                                         rendered="#{tramiteNotarialInconsistenciaCtrl.onPasaporte}"
                                         value="#{tramiteNotarialInconsistenciaCtrl.tramite.nacionalidadRequirente}"
                                         disabled="true"
                                         maxlength="300"
                                         readonly="true"
                                         style="width: 90%" required="true"/>
                        </h:panelGroup>

                        <p:outputLabel for="correoElectronico" value="#{etiquetas['nombre.correoElectronico']}" />
                        <p:inputText id="correoElectronico" value="#{tramiteNotarialInconsistenciaCtrl.tramite.correoRequirente}" 
                                     disabled="true"
                                     maxlength="300" 
                                     style="width: 90%" required="true"
                                     readonly="true">                            
                        </p:inputText>

                        <p:outputLabel for="observacion" value="#{etiquetas['nombre.observaciónActoNotarial']}" />
                        <p:inputText id="observacion" value="#{tramiteNotarialInconsistenciaCtrl.tramite.observacion}" 
                                     disabled="true"
                                     maxlength="300" 
                                     style="width: 90%" required="true"
                                     readonly="true">                            
                        </p:inputText>

                        <p:outputLabel for="fechaRegistro" value="#{etiquetas['nombre.fechaRegistro']}" />
                        <p:inputText id="fechaRegistro" value="#{tramiteNotarialInconsistenciaCtrl.tramite.fechaRegistro}" 
                                     disabled="true"
                                     maxlength="300" 
                                     style="width: 90%" required="true"
                                     readonly="true">
                            <f:convertDateTime pattern="yyyy/MM/dd hh:mm a"  />
                        </p:inputText>

                        <p:outputLabel for="fechaReasignacion" value="#{etiquetas['nombre.fechaReasignacion']}" />
                        <p:inputText id="fechaReasignacion" value="#{tramiteNotarialInconsistenciaCtrl.tramite.fechaCierre}" 
                                     disabled="true"
                                     maxlength="300" 
                                     style="width: 90%" required="true"
                                     readonly="true">
                            <f:convertDateTime pattern="yyyy/MM/dd hh:mm a"  />
                        </p:inputText>

                        <p:outputLabel value="#{etiquetas['nombre.descripcionActoNotarial']}" />
                        <p:inputTextarea
                            id="descripcion"
                            value="#{tramiteNotarialInconsistenciaCtrl.tramite.descripcion}"
                            rows="2"
                            required="true"
                            style="width: 90%"
                            counter="display"
                            maxlength="256"
                            counterTemplate="{0} caracteres restantes."/>

                        <br />
                        <h:outputText id="display" />


                        <!--                        <h:panelGroup id="auxLblTramiteInicial">
                                                    <p:outputLabel for="tramiteInicial" value="#{etiquetas['nombre.codigoValidacionTramite']}"
                                                                   rendered="#{tramiteNotarialInconsistenciaCtrl.tramiteOrigen}"/>
                                                </h:panelGroup>
                                                <h:panelGroup id="auxTramiteInicial">
                                                    <p:inputText id="tramiteInicial" 
                                                                 value="#{tramiteNotarialInconsistenciaCtrl.codigoTramiteInicial}" 
                                                                 maxlength="20" 
                                                                 style="width: 90%" 
                                                                 rendered="#{tramiteNotarialInconsistenciaCtrl.tramiteOrigen}"
                                                                 required="true"/>
                                                </h:panelGroup>-->


                    </b:panelGrid>
                </b:panel>    
                <b:panel style="width: 75%" title="#{etiquetas['continua.tramite']}" rendered="#{tramiteNotarialInconsistenciaCtrl.onSelectTramiteInconsistente}">
                    <b:panelGrid colSpans="3,9" style="width: 100%; margin: 4px 5px;">
                       	<p:outputLabel value="#{etiquetas['provincia']}*:" />
                        <b:selectOneMenu id="cmbProvincia"
                                         value="#{tramiteNotarialInconsistenciaCtrl.provinciaId}"
                                         required="true"
                                         requiredMessage="#{etiquetas['provincia']} #{mensajes['requerido']}"
                                         ajax="true" onchange="ajax:tramiteNotarialInconsistenciaCtrl.cantonPorProvincia"
                                         process="@this" update="cmbCanton"
                                         style="font-size:x-small; width: 100%;">
                            <f:selectItem itemLabel="#{etiquetas['seleccionar']}" noSelectionOption="true" itemValue="-1" />
                            <f:selectItems value="#{tramiteNotarialInconsistenciaCtrl.provincia}" var="pro" 
                                           itemLabel="#{pro.nombre}" itemValue="#{pro.provinciaId}" />
                        </b:selectOneMenu>
                        <p:outputLabel value="#{etiquetas['canton']}*:" />
                        <b:selectOneMenu id="cmbCanton"
                                         value="#{tramiteNotarialInconsistenciaCtrl.cantonId}"                                         
                                         required="true"
                                         requiredMessage="#{etiquetas['canton']} #{mensajes['requerido']}"
                                         ajax="true" onchange="ajax:tramiteNotarialInconsistenciaCtrl.institucionProvinciaCanton"
                                         process="@this" update="cmbInstitucion"
                                         style="font-size:x-small; width:100%">
                            <f:selectItem itemLabel="#{etiquetas['seleccionar']}" noSelectionOption="true" />
                            <f:selectItems value="#{tramiteNotarialInconsistenciaCtrl.canton}" var="can"
                                           itemLabel="#{can.nombre}" itemValue="#{can.cantonId}" />
                        </b:selectOneMenu>
                        <p:outputLabel value="#{etiquetas['nombre.institucion']}*:" />
                        <b:selectOneMenu id="cmbInstitucion"
                                         value="#{tramiteNotarialInconsistenciaCtrl.continuaTramiteId}"                                         
                                         required="true"
                                         required-message="#{etiquetas['nombre.institucion']} #{mensajes['requerido']}"
                                         styleClass="form-combo-centrado">
                            <f:selectItem itemLabel="#{etiquetas['seleccionar']}" itemValue="-1" noSelectionOption="true" />
                            <f:selectItems value="#{tramiteNotarialInconsistenciaCtrl.listaInstituciones}" var="inst" 
                                           itemLabel="#{inst.nombre} - #{inst.siglas}" itemValue="#{inst.institucionId}" />
                        </b:selectOneMenu>
                    </b:panelGrid>
                </b:panel>
                <br/>
                <b:panel style="width: 75%" rendered="#{tramiteNotarialInconsistenciaCtrl.onSelectTramiteInconsistente}">
                    <b:panelGrid colSpans="6,6" style="width: 100%; margin: 4px 5px; text-align: center;">
                        <p:commandButton value="#{etiquetas['crearTramite']}" id="crearTramiteBtn" 
                                         style="margin-right:20px;" icon="fa fa-fw fa-check-square-o"
                                         action="#{tramiteNotarialInconsistenciaCtrl.crearTramite}"
                                         update="formRegistroTramite, formGeneracionTramiteDlg, formActosNotarialesInconsistentes">
                            <p:confirm header="#{etiquetas['confirmacion']}" message="#{mensajes['mensaje.creacionTramite']}" icon="fa fa-fw fa-warning" />
                        </p:commandButton>

                        <p:commandButton value="#{etiquetas['cancelar']}" id="cancelarTramiteBtn" 
                                         style="margin-right:20px;" icon="fa fa-fw fa-ban"
                                         action="#{tramiteNotarialInconsistenciaCtrl.cancelar}"
                                         update="formRegistroTramite"
                                         process="@this"/>

                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="#{etiquetas['si']}" type="button" styleClass="ui-confirmdialog-yes" icon="fa fa-fw fa-check" />
                            <p:commandButton value="#{etiquetas['no']}" type="button" styleClass="ui-confirmdialog-no" icon="fa fa-fw fa-remove" />
                        </p:confirmDialog>
                    </b:panelGrid>
                </b:panel>
            </h:form>
        </ui:define>
    </ui:composition>
</html>